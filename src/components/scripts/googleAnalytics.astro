---
// Google Analytics tracking script
import { getGoogleAnalyticsMeasurementID } from '../../../src/config/analytics.ts'

// Fetch dynamic analytics configuration
const googleAnalyticsMeasurementID = await getGoogleAnalyticsMeasurementID()
---

<script
	is:inline
	type="text/partytown"
	src={`https://www.googletagmanager.com/gtag/js?id=${googleAnalyticsMeasurementID}`}></script>

<script is:inline type="text/partytown" data-ga-measurement-id={googleAnalyticsMeasurementID} id="ga-init">
	const measurementId = document.getElementById('ga-init').getAttribute('data-ga-measurement-id')
	window.dataLayer = window.dataLayer || []
	function gtag() {
		dataLayer.push(arguments) // eslint-disable-line
	}
	gtag('js', new Date())
	gtag('config', measurementId)
</script>
